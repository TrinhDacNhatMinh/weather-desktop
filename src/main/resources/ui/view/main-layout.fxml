<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.collections.FXCollections?>
<?import java.lang.String?>

<BorderPane fx:id="mainBorderPane" 
            styleClass="border-pane"
            prefWidth="1200.0" 
            prefHeight="700.0"
            xmlns="http://javafx.com/javafx/17.0.12"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.nhom.weatherdesktop.ui.controller.MainLayoutController"
            stylesheets="@../css/style.css">

    <!-- SIDEBAR -->
    <left>
        <VBox fx:id="sidebar" styleClass="sidebar">
            <children>
                <Button fx:id="toggleSidebarButton" 
                        text="â˜°" 
                        onAction="#handleToggleSidebar"
                        style="-fx-background-color: transparent; -fx-text-fill: #9CA3AF; -fx-font-size: 20px; -fx-padding: 12; -fx-cursor: hand;"
                        maxWidth="Infinity"/>
                
                <Separator style="-fx-padding: 0 0 16 0;"/>

                
                <Button fx:id="myStationButton" 
                        styleClass="sidebar-button, active"
                        onAction="#handleMyStations"
                        mnemonicParsing="false"
                        maxWidth="Infinity">
                    <graphic>
                        <HBox alignment="CENTER_LEFT" spacing="12">
                            <Label text="ðŸ“" style="-fx-font-size: 18px;"/>
                            <Label fx:id="myStationText" text="My Station" style="-fx-font-size: 14px;"/>
                        </HBox>
                    </graphic>
                </Button>
                        
                <Button fx:id="publicStationsButton" 
                        styleClass="sidebar-button"
                        onAction="#handlePublicStations"
                        mnemonicParsing="false"
                        maxWidth="Infinity">
                    <graphic>
                        <HBox alignment="CENTER_LEFT" spacing="12">
                            <Label text="ðŸŒ" style="-fx-font-size: 18px;"/>
                            <Label fx:id="publicStationsText" text="Station Public" style="-fx-font-size: 14px;"/>
                        </HBox>
                    </graphic>
                </Button>
                        
                <Button fx:id="alertsButton" 
                        styleClass="sidebar-button"
                        onAction="#handleAlerts"
                        mnemonicParsing="false"
                        maxWidth="Infinity">
                    <graphic>
                        <HBox alignment="CENTER_LEFT" spacing="12">
                            <Label text="ðŸ””" style="-fx-font-size: 18px;"/>
                            <Label fx:id="alertsText" text="Alert" style="-fx-font-size: 14px;"/>
                        </HBox>
                    </graphic>
                </Button>
                        
                <Button fx:id="settingsButton" 
                        styleClass="sidebar-button"
                        onAction="#handleSettings"
                        mnemonicParsing="false"
                        maxWidth="Infinity">
                    <graphic>
                        <HBox alignment="CENTER_LEFT" spacing="12">
                            <Label text="âš™ï¸" style="-fx-font-size: 18px;"/>
                            <Label fx:id="settingsText" text="Setting" style="-fx-font-size: 14px;"/>
                        </HBox>
                    </graphic>
                </Button>
                
                <!-- Spacer -->
                <Region VBox.vgrow="ALWAYS"/>
                
            </children>
        </VBox>
    </left>

    <!-- CENTER CONTENT -->
    <center>
        <StackPane fx:id="contentArea" styleClass="center-content">
            <!-- MyStation View (Default) -->
            <AnchorPane fx:id="myStationView">
                <VBox spacing="24" alignment="TOP_CENTER" AnchorPane.topAnchor="0" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0" AnchorPane.bottomAnchor="0">
                    <!-- Header with Button -->
                    <HBox alignment="CENTER_LEFT" spacing="16">
                        <Label text="My Weather Station" styleClass="card-header"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button fx:id="showStationsButton" 
                                text="ðŸ“‹ Show Station List" 
                                onAction="#handleShowStationList"
                                style="-fx-font-size: 14px; -fx-padding: 12 24;"/>
                    </HBox>
                    
                    <!-- Large Temperature Display -->
                    <VBox styleClass="stat-card" spacing="16" alignment="CENTER" style="-fx-padding: 32; -fx-background-color: rgba(255,255,255,0.9); -fx-background-radius: 20; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 0);">
                        <HBox alignment="CENTER" spacing="24">
                            <Label text="ðŸŒ¤ï¸" style="-fx-font-size: 64px;"/>
                            <VBox alignment="CENTER_LEFT" spacing="4">
                                <HBox alignment="BOTTOM_LEFT" spacing="8">
                                    <Label fx:id="temperatureValue" text="24" style="-fx-font-size: 72px; -fx-font-weight: bold; -fx-text-fill: black;"/>
                                    <Label text="Â°C" style="-fx-font-size: 44px; -fx-text-fill: #333333;"/>
                                </HBox>
                                <Label text="Partly cloudy" style="-fx-font-size: 18px; -fx-text-fill: black;"/>
                            </VBox>
                        </HBox>
                    </VBox>
                    
                    <!-- Small Stats Grid 4x1 -->
                    <GridPane hgap="32" vgap="16" alignment="CENTER" maxWidth="800" style="-fx-background-color: rgba(255,255,255,0.9); -fx-background-radius: 20; -fx-padding: 24; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 0);">
                        <!-- Humidity -->
                        <VBox spacing="4" GridPane.columnIndex="0" GridPane.rowIndex="0" alignment="CENTER_LEFT">
                            <Label text="Humidity" style="-fx-font-size: 12px; -fx-text-fill: #555555;"/>
                            <HBox alignment="BOTTOM_LEFT" spacing="4">
                                <Label fx:id="humidityValue" text="83" style="-fx-font-size: 24px; -fx-font-weight: 600; -fx-text-fill: black;"/>
                                <Label text="\%" style="-fx-font-size: 14px; -fx-text-fill: #555555;"/>
                            </HBox>
                        </VBox>
                        
                        <!-- Wind -->
                        <VBox spacing="4" GridPane.columnIndex="1" GridPane.rowIndex="0" alignment="CENTER_LEFT">
                            <Label text="Wind" style="-fx-font-size: 12px; -fx-text-fill: #555555;"/>
                            <HBox alignment="BOTTOM_LEFT" spacing="4">
                                <Label fx:id="windspeedValue" text="13" style="-fx-font-size: 24px; -fx-font-weight: 600; -fx-text-fill: black;"/>
                                <Label text="km/h" style="-fx-font-size: 14px; -fx-text-fill: #555555;"/>
                            </HBox>
                        </VBox>
                        
                        <!-- Rainfall -->
                        <VBox spacing="4" GridPane.columnIndex="2" GridPane.rowIndex="0" alignment="CENTER_LEFT">
                            <Label text="Rainfall" style="-fx-font-size: 12px; -fx-text-fill: #555555;"/>
                            <HBox alignment="BOTTOM_LEFT" spacing="4">
                                <Label fx:id="rainfallValue" text="8" style="-fx-font-size: 24px; -fx-font-weight: 600; -fx-text-fill: black;"/>
                                <Label text="mm" style="-fx-font-size: 14px; -fx-text-fill: #555555;"/>
                            </HBox>
                        </VBox>
                        
                        <!-- Dust / Air Quality -->
                        <VBox spacing="4" GridPane.columnIndex="3" GridPane.rowIndex="0" alignment="CENTER_LEFT">
                            <Label text="Air Quality (Dust)" style="-fx-font-size: 12px; -fx-text-fill: #555555;"/>
                            <HBox alignment="BOTTOM_LEFT" spacing="6">
                                <Label text="ðŸ”´" style="-fx-font-size: 10px;"/>
                                <Label fx:id="dustValue" text="111" style="-fx-font-size: 24px; -fx-font-weight: 600; -fx-text-fill: black;"/>
                            </HBox>
                        </VBox>
                    </GridPane>
                </VBox>
                
                <!-- Station List Panel (Initially Hidden) - Positioned on right side -->
                <VBox fx:id="stationListContainer" 
                      spacing="12" 
                      managed="false" 
                      visible="false" 
                      styleClass="card"
                      style="-fx-background-color: rgba(30, 30, 40, 0.98); -fx-padding: 24; -fx-pref-width: 350;"
                      AnchorPane.topAnchor="20" 
                      AnchorPane.rightAnchor="20" 
                      AnchorPane.bottomAnchor="20">
                    <HBox alignment="CENTER_LEFT" spacing="12">
                        <Label text="Available Stations" styleClass="card-title" style="-fx-text-fill: white;"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button text="âœ•" onAction="#handleShowStationList" style="-fx-background-color: transparent; -fx-text-fill: #9CA3AF; -fx-font-size: 18px; -fx-cursor: hand;"/>
                    </HBox>
                    <Separator style="-fx-background-color: rgba(255,255,255,0.2);"/>
                    <ScrollPane fitToWidth="true" style="-fx-background-color: transparent; -fx-background: transparent;" VBox.vgrow="ALWAYS">
                        <VBox fx:id="stationList" spacing="12" style="-fx-background-color: transparent;">
                            <!-- Station items will be populated dynamically from API -->
                        </VBox>
                    </ScrollPane>
                    
                    <!-- Add Station Button -->
                    <Button fx:id="addStationButton" 
                            text="âž• Add Station" 
                            onAction="#handleAddStation"
                            maxWidth="Infinity"
                            style="-fx-background-color: #3B82F6; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: 600; -fx-padding: 12 24; -fx-background-radius: 8; -fx-cursor: hand;"/>
                </VBox>
            </AnchorPane>
            
            <!-- Public Stations View (Hidden by default) -->
            <VBox fx:id="publicStationsView" spacing="24" alignment="TOP_CENTER" managed="false" visible="false">
                <Label text="ðŸŒ Public Stations" styleClass="card-header"/>
                <VBox styleClass="card empty-state" prefWidth="400" prefHeight="200">
                    <Label text="Public stations will be displayed here" styleClass="empty-state-text"/>
                </VBox>
            </VBox>
            
            <!-- Alerts View (Hidden by default) -->
            <VBox fx:id="alertsView" spacing="24" alignment="TOP_CENTER" managed="false" visible="false">
                <Label text="ðŸ”” Alerts Notifications" styleClass="card-header"/>
                <VBox styleClass="card empty-state" prefWidth="400" prefHeight="200">
                    <Label text="No active alerts" styleClass="empty-state-text"/>
                </VBox>
            </VBox>
            
            <!-- Settings View (Hidden by default) -->
            <VBox fx:id="settingsView" spacing="24" alignment="TOP_CENTER" managed="false" visible="false">
                <Label text="âš™ï¸ Settings" styleClass="card-header"/>
                <VBox styleClass="card" spacing="16" prefWidth="500">
                    <Label text="Application Settings" styleClass="card-title"/>
                    <Separator/>
                    <HBox spacing="12" alignment="CENTER_LEFT">
                        <Label text="Theme:" prefWidth="120"/>
                        <ComboBox prefWidth="200">
                            <items>
                                <javafx.collections.FXCollections fx:factory="observableArrayList">
                                    <String fx:value="Dark"/>
                                    <String fx:value="Light"/>
                                </javafx.collections.FXCollections>
                            </items>
                        </ComboBox>
                    </HBox>
                    <HBox spacing="12" alignment="CENTER_LEFT">
                        <Label text="Temperature Unit:" prefWidth="120"/>
                        <ComboBox prefWidth="200">
                            <items>
                                <javafx.collections.FXCollections fx:factory="observableArrayList">
                                    <String fx:value="Celsius (Â°C)"/>
                                    <String fx:value="Fahrenheit (Â°F)"/>
                                </javafx.collections.FXCollections>
                            </items>
                        </ComboBox>
                    </HBox>
                </VBox>
            </VBox>
        </StackPane>
    </center>

</BorderPane>
