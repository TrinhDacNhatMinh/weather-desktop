<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.collections.FXCollections?>
<?import java.lang.String?>

<BorderPane fx:id="mainBorderPane" 
            styleClass="border-pane"
            prefWidth="1200.0" 
            prefHeight="700.0"
            xmlns="http://javafx.com/javafx/17.0.12"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.nhom.weatherdesktop.ui.controller.MainLayoutController"
            stylesheets="@../css/style.css @../css/main-layout.css">

    <!-- SIDEBAR -->
    <left>
        <VBox fx:id="sidebar" styleClass="sidebar">
            <children>
                <Button fx:id="toggleSidebarButton" 
                        text="â˜°" 
                        onAction="#handleToggleSidebar"
                        styleClass="toggle-sidebar-btn"
                        maxWidth="Infinity"/>
                
                <Separator styleClass="sidebar-separator"/>

                
                <Button fx:id="myStationButton" 
                        styleClass="sidebar-button, active"
                        onAction="#handleMyStations"
                        mnemonicParsing="false"
                        maxWidth="Infinity">
                    <graphic>
                        <HBox alignment="CENTER_LEFT" spacing="12">
                            <Label text="ðŸ“" styleClass="sidebar-icon"/>
                            <Label fx:id="myStationText" text="My Station" styleClass="sidebar-text"/>
                        </HBox>
                    </graphic>
                </Button>
                        
                <Button fx:id="publicStationsButton" 
                        styleClass="sidebar-button"
                        onAction="#handlePublicStations"
                        mnemonicParsing="false"
                        maxWidth="Infinity">
                    <graphic>
                        <HBox alignment="CENTER_LEFT" spacing="12">
                            <Label text="ðŸŒ" styleClass="sidebar-icon"/>
                            <Label fx:id="publicStationsText" text="Station Public" styleClass="sidebar-text"/>
                        </HBox>
                    </graphic>
                </Button>
                        
                <Button fx:id="alertsButton" 
                        styleClass="sidebar-button"
                        onAction="#handleAlerts"
                        mnemonicParsing="false"
                        maxWidth="Infinity">
                    <graphic>
                        <HBox alignment="CENTER_LEFT" spacing="12">
                            <Label text="ðŸ””" styleClass="sidebar-icon"/>
                            <Label fx:id="alertsText" text="Alert" styleClass="sidebar-text"/>
                        </HBox>
                    </graphic>
                </Button>
                        
                <Button fx:id="settingsButton" 
                        styleClass="sidebar-button"
                        onAction="#handleSettings"
                        mnemonicParsing="false"
                        maxWidth="Infinity">
                    <graphic>
                        <HBox alignment="CENTER_LEFT" spacing="12">
                            <Label text="âš™ï¸" styleClass="sidebar-icon"/>
                            <Label fx:id="settingsText" text="Setting" styleClass="sidebar-text"/>
                        </HBox>
                    </graphic>
                </Button>
                
                <!-- Spacer -->
                <Region VBox.vgrow="ALWAYS"/>
                
            </children>
        </VBox>
    </left>

    <!-- CENTER CONTENT -->
    <center>
        <StackPane fx:id="contentArea" styleClass="center-content">
            <!-- MyStation View (Default) -->
            <AnchorPane fx:id="myStationView">
                <VBox spacing="24" alignment="TOP_CENTER" AnchorPane.topAnchor="0" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0" AnchorPane.bottomAnchor="0">
                    <!-- Header with Button -->
                    <HBox alignment="CENTER_LEFT" spacing="16">
                        <Label text="My Weather Station" styleClass="card-header"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button fx:id="showStationsButton" 
                                text="ðŸ“‹ Show Station List" 
                                onAction="#handleShowStationList"
                                styleClass="show-stations-btn"/>
                    </HBox>
                    
                    <!-- Station Info -->
                    <VBox styleClass="station-info" spacing="5" alignment="CENTER">
                        <Label fx:id="stationNameLabel" text="Select a Station" styleClass="station-name" style="-fx-font-size: 28px; -fx-font-weight: bold;"/>
                        <Label fx:id="stationLocationLabel" text="" styleClass="station-location"/>
                    </VBox>
                    
                    <!-- Large Temperature Display -->
                    <VBox styleClass="temperature-card" spacing="16" alignment="CENTER">
                        <HBox alignment="CENTER" spacing="24">
                            <Label text="ðŸŒ¤ï¸" styleClass="temperature-icon"/>
                            <VBox alignment="CENTER_LEFT" spacing="4">
                                <HBox alignment="BOTTOM_LEFT" spacing="8">
                                    <Label fx:id="temperatureValue" text="24" styleClass="temperature-value"/>
                                    <Label text="Â°C" styleClass="temperature-unit"/>
                                </HBox>
                                <Label text="Partly cloudy" styleClass="weather-description"/>
                            </VBox>
                        </HBox>
                    </VBox>
                    
                    <!-- Small Stats Grid 4x1 -->
                    <GridPane styleClass="stats-grid" hgap="32" vgap="16" alignment="CENTER" maxWidth="800">
                        <!-- Humidity -->
                        <VBox spacing="4" GridPane.columnIndex="0" GridPane.rowIndex="0" alignment="CENTER_LEFT">
                            <Label text="Humidity" styleClass="stat-label"/>
                            <HBox alignment="BOTTOM_LEFT" spacing="4">
                                <Label fx:id="humidityValue" text="83" styleClass="stat-value"/>
                                <Label text="%%" styleClass="stat-unit"/>
                            </HBox>
                        </VBox>
                        
                        <!-- Wind -->
                        <VBox spacing="4" GridPane.columnIndex="1" GridPane.rowIndex="0" alignment="CENTER_LEFT">
                            <Label text="Wind" styleClass="stat-label"/>
                            <HBox alignment="BOTTOM_LEFT" spacing="4">
                                <Label fx:id="windspeedValue" text="13" styleClass="stat-value"/>
                                <Label text="km/h" styleClass="stat-unit"/>
                            </HBox>
                        </VBox>
                        
                        <!-- Rainfall -->
                        <VBox spacing="4" GridPane.columnIndex="2" GridPane.rowIndex="0" alignment="CENTER_LEFT">
                            <Label text="Rainfall" styleClass="stat-label"/>
                            <HBox alignment="BOTTOM_LEFT" spacing="4">
                                <Label fx:id="rainfallValue" text="8" styleClass="stat-value"/>
                                <Label text="mm" styleClass="stat-unit"/>
                            </HBox>
                        </VBox>
                        
                        <!-- Dust / Air Quality -->
                        <VBox spacing="4" GridPane.columnIndex="3" GridPane.rowIndex="0" alignment="CENTER_LEFT">
                            <Label text="Air Quality (Dust)" styleClass="stat-label"/>
                            <HBox alignment="BOTTOM_LEFT" spacing="6">
                                <Label text="ðŸ”´" styleClass="stat-indicator"/>
                                <Label fx:id="dustValue" text="111" styleClass="stat-value"/>
                            </HBox>
                        </VBox>
                    </GridPane>
                </VBox>
                
                <!-- Station List Panel (Initially Hidden) - Positioned on right side -->
                <VBox fx:id="stationListContainer" 
                      spacing="12" 
                      managed="false" 
                      visible="false" 
                      styleClass="card,station-list-container"
                      AnchorPane.topAnchor="20" 
                      AnchorPane.rightAnchor="20" 
                      AnchorPane.bottomAnchor="20">
                    <HBox alignment="CENTER_LEFT" spacing="12">
                        <Label text="Available Stations" styleClass="card-title,station-list-title"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button text="âœ•" onAction="#handleShowStationList" styleClass="station-list-close-btn"/>
                    </HBox>
                    <Separator styleClass="station-list-separator"/>
                    <ScrollPane fitToWidth="true" styleClass="station-list-scroll" VBox.vgrow="ALWAYS">
                        <VBox fx:id="stationList" spacing="12" styleClass="station-list-content">
                            <!-- Station items will be populated dynamically from API -->
                        </VBox>
                    </ScrollPane>
                    
                    <!-- Add Station Button -->
                    <Button fx:id="addStationButton" 
                            text="âž• Add Station" 
                            onAction="#handleAddStation"
                            maxWidth="Infinity"
                            styleClass="add-station-btn"/>
                </VBox>
            </AnchorPane>
            
            <!-- Public Stations View (Hidden by default) -->
            <VBox fx:id="publicStationsView" spacing="24" alignment="TOP_CENTER" managed="false" visible="false">
                <Label text="ðŸŒ Public Stations" styleClass="card-header"/>
                <VBox styleClass="card empty-state" prefWidth="400" prefHeight="200">
                    <Label text="Public stations will be displayed here" styleClass="empty-state-text"/>
                </VBox>
            </VBox>
            
            <!-- Alerts View (Hidden by default) -->
            <VBox fx:id="alertsView" spacing="24" alignment="TOP_CENTER" managed="false" visible="false">
                <!-- Header with unread count -->
                <HBox alignment="CENTER_LEFT" spacing="16">
                    <Label text="ðŸ”” Alerts" styleClass="card-header"/>
                    <Label fx:id="unreadCountLabel" text="0" styleClass="unread-badge" visible="false"/>
                </HBox>
                
                <!-- Alerts List Container -->
                <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS" styleClass="alerts-scroll" prefHeight="600">
                    <VBox fx:id="alertsListContainer" spacing="12" styleClass="alerts-list"/>
                </ScrollPane>
                
                <!-- Empty State -->
                <VBox fx:id="emptyAlertsState" alignment="CENTER" spacing="16" VBox.vgrow="ALWAYS" 
                      styleClass="empty-state" prefWidth="500" prefHeight="400" visible="true">
                    <Label text="ðŸ””" styleClass="empty-icon"/>
                    <Label text="No alerts yet" styleClass="empty-title"/>
                    <Label text="You'll see notifications here when weather conditions trigger alerts" 
                           styleClass="empty-subtitle" wrapText="true" textAlignment="CENTER" maxWidth="400"/>
                </VBox>
            </VBox>
            
            <!-- Settings View (Hidden by default) -->
            <VBox fx:id="settingsView" spacing="24" alignment="TOP_CENTER" managed="false" visible="false">
                <Label text="âš™ï¸ Settings" styleClass="card-header"/>
                <VBox styleClass="card" spacing="16" prefWidth="500">
                    <Label text="Application Settings" styleClass="card-title"/>
                    <Separator/>
                    <HBox spacing="12" alignment="CENTER_LEFT">
                        <Label text="Theme:" prefWidth="120"/>
                        <ComboBox prefWidth="200">
                            <items>
                                <javafx.collections.FXCollections fx:factory="observableArrayList">
                                    <String fx:value="Dark"/>
                                    <String fx:value="Light"/>
                                </javafx.collections.FXCollections>
                            </items>
                        </ComboBox>
                    </HBox>
                    <HBox spacing="12" alignment="CENTER_LEFT">
                        <Label text="Temperature Unit:" prefWidth="120"/>
                        <ComboBox prefWidth="200">
                            <items>
                                <javafx.collections.FXCollections fx:factory="observableArrayList">
                                    <String fx:value="Celsius (Â°C)"/>
                                    <String fx:value="Fahrenheit (Â°F)"/>
                                </javafx.collections.FXCollections>
                            </items>
                        </ComboBox>
                    </HBox>
                </VBox>
            </VBox>
        </StackPane>
    </center>

</BorderPane>
